<!doctype html>
<html>

<head>
    <script src="asyncReq.js">


    </script>
    <script>
        var oldTemp;
        var oldHumin;
        var oldLight;
        var runCount;

        var x = function() {
            loadFile("./getData", function(data) {
                var obj = JSON.parse(data);
                if (runCount == 0) {
                    document.getElementById("results").innerHTML =
                        "<b>LIGHT:</b> " + obj.light +
                        "<br> <b>TEMP:</b> " + obj.temp +
                        "<br> <b>HUMIDITY:</b> " + obj.humidity;
                    runCount++;
                } else {
                    if (oldLight > obj.light) {
                        document.getElementById("results").innerHTML =
                            "<b>LIGHT</b><br>" + obj.light + " (-" + (oldLight - obj.light) + ")";
                    } else if (oldLight < obj.light) {
                        document.getElementById("results").innerHTML =
                            "<b>LIGHT</b><br>" + obj.light + " (+" + (obj.light - oldLight) + ")";
                    } else {
                        document.getElementById("results").innerHTML =
                            "<b>LIGHT</b><br>" + obj.light + " (--)";
                    }
                }

                oldTemp = obj.temp;
                oldHumin = obj.humidity;
                oldLight = obj.light;
            });
        }

        function start() {
            runCount = 0;
            x();
            setInterval("x()", 1000);
        }

    </script>

</head>

<body onload='start()'>
    <h1> TEST </h1>

    <div id='results'> </div>

</body>

</html>
